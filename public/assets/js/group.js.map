{"version":3,"sources":["group.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"group.js","sourcesContent":["/**\r\n * Created by USER on 07/04/2017.\r\n */\r\n\r\n/**\r\n * Js pour la partie demande d'adhésion.\r\n */\r\nvar show_demande = false;\r\n\r\n$('#show_demande').click( cacher_afficher_adhesion);\r\n$('#hide_demande').click( cacher_afficher_adhesion);\r\n\r\n\r\nfunction cacher_afficher_adhesion() {\r\n\r\n    if(show_demande == false){\r\n        $(\"#section_demande\").css(\"display\",\"block\");\r\n        $(\"#show_demande\").addClass(\"hidden\");\r\n        $(\"#hide_demande\").removeClass(\"hidden\");\r\n\r\n        show_demande=true;\r\n    }\r\n    else {\r\n        show_demande=false;\r\n        $(\"#section_demande\").css(\"display\",\"none\");\r\n        $(\"#hide_demande\").addClass(\"hidden\");\r\n        $(\"#show_demande\").removeClass(\"hidden\");\r\n    }\r\n\r\n}\r\n\r\n/*\r\nici c'est la confirmation.\r\n */\r\n\r\n$('#show_create_ad').click(cacher_afficher_tab_resultat);\r\nvar show_hide_tab_resul = false;\r\nfunction cacher_afficher_tab_resultat(){\r\n    if(show_hide_tab_resul == false){\r\n        $(\"#div_create_ad\").show();\r\n        show_hide_tab_resul = true;\r\n    }\r\n    else {\r\n        $(\"#div_create_ad\").hide();\r\n        show_hide_tab_resul = false;\r\n    }\r\n}\r\n\r\n$('.refuse-btn').click(function(){\r\n   var chaine = this.id;\r\n    if(chaine.indexOf(\"btn-refuse-\",0) != 0){\r\n        alert(\"les informations sont incorrectes\");\r\n    }\r\n    var id_user = chaine.substring(11,chaine.length);\r\n    if(isNaN(id_user)){\r\n        alert(\"informations incorrectes\");\r\n    }\r\n    var id_group = group.id;\r\n    var nom_user = $(\"#td-name-\"+id_user+\"\").text();\r\n    if(!confirm(\"Nous allons procéder a la suppression de la demande du membre \"+nom_user)){\r\n        return false;\r\n    }\r\n\r\n    $.ajax({\r\n        //url: '/group/valid_adhesion_group/id_user='+id_user+'/id_group='+id_group,\r\n        url: '/group/del_adhesion_group',\r\n        type: \"post\",\r\n        dataType: 'json',\r\n        data: {'id_user':id_user, 'id_group': id_group, '_token': _token},\r\n        //data : \"id_user=\"+id_user+\"&id_group=\"+id_group,\r\n        //data: {'email':$('input[name=email]').val(), '_token': $('input[name=_token]').val()},\r\n        success: function(data){\r\n            var rep = data;\r\n            if(rep.type === \"success\"){\r\n                alert('le message est : '+rep.message);\r\n                // tout a marché comme sur des roulettes.\r\n                if($('#tab_demande tr').length > 1){\r\n                    $(\"#tr-user-\"+id_user+\"\").hide();\r\n                  }\r\n                else{\r\n                    $(\"#section_demande\").hide();\r\n                    $(\"#hide_demande\").hide();\r\n                }\r\n\r\n                $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-success fade in\\\">\" +\r\n                    \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                    \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                    \"<strong>\"+rep.message+\"</strong> \" +\r\n                    \"</div>\");\r\n            }\r\n            else{\r\n                if(rep.type === \"error\"){\r\n                    $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-block alert-danger fade in\\\">\" +\r\n                        \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                        \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                        \"<strong>\"+rep.message+\"</strong> \" +\r\n                        \"</div>\");\r\n                }\r\n            }\r\n\r\n        },\r\n        error : function (data) {\r\n            alert(data);\r\n            alert(\"erreur lors de la suppression.\");\r\n            $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-block alert-danger fade in\\\">\" +\r\n                \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                \"<strong>Erreur lors de la suppression de la demande. <br> erreur =</strong> \" + data +\r\n                \"</div>\");\r\n\r\n        }\r\n    });\r\n\r\n});\r\n\r\n$('.send-btn').click(function () {\r\n    var chaine = this.id;\r\n    //alert(\"tu ma cliqué\");\r\n    if(chaine.indexOf(\"btn-accept-\",0) != 0){\r\n        return 0;\r\n    }\r\n    var id_user = chaine.substring(11,chaine.length);\r\n    if(isNaN(id_user)){\r\n       //ce n'est pas un nombre, il a encore triché. il faut arreter la requete\r\n    }\r\n\r\n    var id_group = group.id;\r\n    var description = $(\"#td-desc-\"+id_user+\"\").text();\r\n    var nom_user = $(\"#td-name-\"+id_user+\"\").text();\r\n    var photo = $(\"#td-image-\"+id_user+\"\").html();\r\n\r\n\r\n    $(\".modal-title\").html(\"<i class=\\\"icon_plus_alt2\\\"></i>\"+group.name + \" >> Valider l'adhésion\");\r\n    $(\".modal-body\").html(\"<h4>\"+nom_user +\"</h4>\" + \"<br> \" +\r\n        \"<p style='float: left; width: 150px; height: auto; margin-right: 20px;'>\"+photo+\" </p>\"+\r\n        \"<p style='text-align: justify;'>\"+ description + \"\" +\r\n        \" </p>\" +\r\n        \"<p style='text-align: center;'> <br> <button id='btn-valid-adh-\"+id_user+\"' class='btn btn-primary btn-valid-adhesion' onclick='accepter(\"+id_user+\",\"+id_group+\")' style='margin-right: 50px;'>Accepter l'adhésion du membre </button>\" +\r\n        \" <button class='btn btn-success' onclick=\\\"$('#ConfirmAction').modal('toggle');\\\">Annuler</button> </p>\");\r\n\r\n    //alert(nom_user + \"<br>\"+ description + \" <br> Etes vous sur de vouloir ajouter ce membre? \");\r\n});\r\n\r\n/**\r\n * ici c'est la suppression finale, il valide l'adhésion du membre.\r\n */\r\n\r\nfunction accepter(id_user, id_group){\r\n    $('#ConfirmAction').modal('toggle');\r\n    $.ajax({\r\n        //url: '/group/valid_adhesion_group/id_user='+id_user+'/id_group='+id_group,\r\n        url: '/group/valid_adhesion_group',\r\n        type: \"post\",\r\n        dataType: 'json',\r\n        data: {'id_user':id_user, 'id_group': id_group, '_token': _token},\r\n        //data : \"id_user=\"+id_user+\"&id_group=\"+id_group,\r\n        //data: {'email':$('input[name=email]').val(), '_token': $('input[name=_token]').val()},\r\n        success: function(data){\r\n            var rep = data;\r\n            if(rep.type === \"success\"){\r\n                //alert('le message est : '+rep.message);\r\n                // tout a marché comme sur des roulettes.\r\n                if($('#tab_demande tr').length > 1){\r\n                    $(\"#tr-user-\"+id_user+\"\").hide();\r\n                }\r\n                else{\r\n                    $(\"#section_demande\").hide();\r\n                    $(\"#hide_demande\").hide();\r\n                }\r\n\r\n                $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-success fade in\\\">\" +\r\n                    \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                    \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                    \"<strong>\"+rep.message+\"</strong> \" +\r\n                    \"</div>\");\r\n            }\r\n            else{\r\n                if(rep.type === \"error\"){\r\n                    $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-block alert-danger fade in\\\">\" +\r\n                        \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                        \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                        \"<strong>\"+rep.message+\"</strong> \" +\r\n                        \"</div>\");\r\n                }\r\n            }\r\n\r\n        },\r\n        error : function (data) {\r\n            alert(data);\r\n            alert(\"erreur lors de la validation. la valeur est : \"+data);\r\n            $(\"#message_adhesion\").html(\"<div class=\\\"alert alert-block alert-danger fade in\\\">\" +\r\n                \"<button data-dismiss=\\\"alert\\\" class=\\\"close close-sm\\\" type=\\\"button\\\">\" +\r\n                \"<i class=\\\"icon-remove\\\"></i></button>\" +\r\n                \"<strong>Erreur lors de la validation de la demande. <br> erreur =</strong> \" + data +\r\n                \"</div>\");\r\n\r\n        }\r\n    });\r\n}\r\n\r\n\r\nvar bool_check_even = false; // il est caché.\r\n$(\"#p_date_even\").hide();\r\n$(\"#checkbox-even\").click(function(){\r\n    if(bool_check_even == false){\r\n        $(\"#p_date_even\").show();\r\n        bool_check_even = true;\r\n    }\r\n    else{\r\n        $(\"#p_date_even\").hide();\r\n        bool_check_even = false;\r\n    }\r\n});\r\n\r\nvar bool_file1  = false;\r\nvar bool_file2 = false;\r\nvar bool_file3 = false;\r\n/*\r\n$(\"#span_file2\").hide();\r\n$(\"#span_file3\").hide();\r\n*/\r\n$(\"#del_file1\").click(function () {\r\n   $(\"#file1\").val('');\r\n   $(\"#file1\").change();\r\n});\r\n\r\n$(\"#del_file2\").click(function () {\r\n    $(\"#file2\").val('');\r\n    $(\"#file2\").change();\r\n});\r\n\r\n$(\"#del_file3\").click(function () {\r\n    $(\"#file3\").val('');\r\n    $(\"#file3\").change();\r\n});\r\n\r\n$(\"#file1\").change(function() {\r\n\r\n    if($(\"#file1\").val() != ''){ //il y'a quelque chose à l'intérieur.\r\n        $(\"#file1\").removeClass('btn-primary').addClass('btn-success');\r\n        if(bool_file2 == false){\r\n            $(\"#span_file2\").show();\r\n        }\r\n    }\r\n    else{\r\n        $(\"#file1\").removeClass('btn-success').addClass('btn-primary');\r\n        if($(\"#file2\").val() == \"\"){\r\n            $(\"#span_file2\").hide();\r\n        }\r\n        if($(\"#file3\").val() ==\"\"){\r\n            $(\"#span_file3\").hide();\r\n        }\r\n    }\r\n});\r\n\r\n$(\"#file2\").change(function () {\r\n    if($(\"#file2\").val()!=''){\r\n        $(\"#file2\").removeClass('btn-primary').addClass('btn-success');\r\n        $(\"#span_file3\").show();\r\n    }\r\n    else{\r\n        $(\"#file2\").removeClass('btn-success').addClass('btn-primary');\r\n        if($(\"#file3\").val()=='') {\r\n            $(\"#span_file3\").hide();\r\n        }\r\n        if($(\"#file1\").val()=='') {\r\n            $(\"#span_file2\").hide();\r\n        }\r\n    }\r\n});\r\n\r\n$(\"#file3\").change(function () {\r\n    if($(\"#file3\").val()==''){\r\n        $(\"#file3\").removeClass('btn-success').addClass('btn-primary');\r\n        if($(\"#file2\").val()=='') {\r\n            $(\"#span_file3\").hide();\r\n        }\r\n    }\r\n    else{\r\n        $(\"#file3\").removeClass('btn-primary').addClass('btn-success');\r\n    }\r\n});\r\n\r\nvar form_create_ad = null;\r\n$(\"#create_ad\").on('submit', function (event) {\r\n    event.preventDefault();\r\n\r\n    form_create_ad = this;\r\n    var data = new FormData( this );\r\n\r\n    $.ajaxSetup(\r\n        {\r\n            headers:\r\n                {\r\n                    'X-CSRF-Token': $('input[name=\"_token\"]').val()\r\n                }\r\n        });\r\n\r\n    $.ajax({\r\n        url: form_create_ad['action'],\r\n        type: form_create_ad['method'],\r\n        contentType: false, // obligatoire pour de l'upload\r\n        processData: false, // obligatoire pour de l'upload,\r\n        dataType : 'json',\r\n        data: data,\r\n        success: function (response) {\r\n\r\n            if(response.type === \"success\" ){\r\n\r\n                $(\"#message\").removeClass('alert-danger').addClass('alert-success');\r\n                $(\"#file1\").val(\"\"); $(\"#file1\").removeClass('btn-success').addClass('btn-primary'); $(\"#file1\").change();\r\n                $(\"#file2\").val(\"\"); $(\"#file2\").removeClass('btn-success').addClass('btn-primary'); $(\"#file2\").change();\r\n                $(\"#file3\").val(\"\"); $(\"#file3\").removeClass('btn-success').addClass('btn-primary'); $(\"#file3\").change();\r\n                $(\"#description_create_ad\").val(\"\");\r\n                $(\"#message\").html(\"<strong>\"+response.message+\"</strong>\");\r\n                $(\"#message\").show();\r\n            }\r\n            else {\r\n\r\n                $(\"#message\").removeClass('alert-success').addClass('alert-danger');\r\n                $(\"#message\").html(\"<strong>\"+response.message+\"</strong>\");\r\n                $(\"#message\").show();\r\n            }\r\n            //console.log(\"Reponse = \"+response.responseJSON.success);\r\n            //console.log(response);\r\n        },\r\n        error : function (erreur) {\r\n            $(\"#message\").removeClass('alert-success').addClass('alert-danger');\r\n            $(\"#message\").html(\"<strong>\"+erreur+\"</strong>\");\r\n        }\r\n\r\n    });\r\n});\r\n\r\n\r\n/*\r\n$(\"#show_demande\").click(function(){\r\n\r\n});\r\n\r\n/***** filtrage de la database //*/\r\n\r\nfunction filterGlobal () {\r\n    $('#table_resultats').DataTable().search(\r\n        $('#global_filter').val(),\r\n        $('#global_regex').prop('checked'),\r\n        $('#global_smart').prop('checked')\r\n    ).draw();\r\n}\r\n\r\nfunction filterColumn ( i ) {\r\n    $('#table_resultats').DataTable().column( i ).search(\r\n        $('#col'+i+'_filter').val(),\r\n        $('#col'+i+'_regex').prop('checked'),\r\n        $('#col'+i+'_smart').prop('checked')\r\n    ).draw();\r\n}\r\n\r\n$(document).ready(function() {\r\n    $('#table_resultats').DataTable();\r\n\r\n    $('input.global_filter').on( 'keyup click', function () {\r\n        filterGlobal();\r\n    } );\r\n\r\n    $('input.column_filter').on( 'keyup click', function () {\r\n        filterColumn( $(this).parents('tr').attr('data-column') );\r\n    } );\r\n} );\r\n\r\n\r\n$(document).ready(function() {\r\n    $('#table_resultats').DataTable();\r\n\r\n    $('input.global_filter').on( 'keyup click', function () {\r\n        filterGlobal();\r\n    } );\r\n\r\n    $('input.column_filter').on( 'keyup click', function () {\r\n        filterColumn( $(this).parents('tr').attr('data-column') );\r\n    } );\r\n} );"]}