{"version":3,"sources":["uploadVideo.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"uploadVideo.js","sourcesContent":["\r\n$('#btnCloseAddVideo').click(function(event){\r\n\r\n    $('#msg').css('display', 'none');\r\n    $('#addVideoAction').css('display', 'none');\r\n    $('.modal-backdrop').css('display', 'none');\r\n    $('.modal-backdrop').remove();\r\n    $('#btnAddVideo').click();\r\n    $('#upload-form input').css('background', 'white').val('');\r\n    $('#upload-form textarea').css('background', 'white').val('');\r\n    $('#progress-div').hide();\r\n    $('#progress-bar').css('width', '0%');\r\n    $('#percent').text('0%');\r\n    $('#label-file').text('Choisissez une vidéo');\r\n\r\n});\r\n\r\n$('.inputfile').change(function (event) {\r\n   $('#msg').css('display', 'none');\r\n});\r\n\r\nvar formUploadVideo = null;\r\n\r\n$(\"#upload-form\").on('submit', function (event) {\r\n\r\n    event.preventDefault();\r\n    formUploadVideo = this;\r\n    var data = new FormData( this );\r\n    $('#btnSubmitAddVideo').prop('disabled', true);\r\n    $('#progress-div').show();\r\n\r\n    $.ajaxSetup(\r\n    {\r\n        headers:\r\n            {\r\n                'X-CSRF-Token': $('input[name=\"_token\"]').val()\r\n            }\r\n    });\r\n\r\n    $.ajax({\r\n        url: formUploadVideo['action'],\r\n        type: formUploadVideo['method'],\r\n        contentType: false, // obligatoire pour de l'upload\r\n        processData: false, // obligatoire pour de l'upload,\r\n        dataType : 'json',\r\n        data: data,\r\n        resetForm: true,\r\n\r\n        xhr: function() {\r\n            var xhr = new window.XMLHttpRequest();\r\n\r\n            xhr.upload.addEventListener(\"progress\", function(evt) {\r\n                if (evt.lengthComputable) {\r\n                    var percentComplete = evt.loaded / evt.total;\r\n                    percentComplete = parseInt(percentComplete * 100);\r\n                    console.log(percentComplete);\r\n\r\n                    $('#progress-bar').css('width', percentComplete + '%');\r\n                    $('#percent').text(percentComplete + '%');\r\n\r\n                    if (percentComplete === 100) {\r\n                        $('#progress-div').hide();\r\n                        $('#loader-icon').show();\r\n                    }\r\n\r\n                }\r\n            }, false);\r\n\r\n            return xhr;\r\n        },\r\n\r\n        success: function (response) {\r\n\r\n            console.log(response.message);\r\n\r\n            if(response.type === \"success\" ){\r\n\r\n                $('#loader-icon').hide();\r\n                $('#msg').removeClass('text-danger').addClass('text-success');\r\n                $('#msg').html(response.message);\r\n                $('#msg').css('display', 'block').css('color', 'green');\r\n                $('#btnSubmitAddVideo').prop('disabled', false);\r\n\r\n                $('#upload-form input').css('background', 'white').val('');\r\n                $('#upload-form textarea').css('background', 'white').val('');\r\n                $('#progress-div').hide();\r\n                $('#progress-bar').css('width', '0%');\r\n                $('#percent').text('0%');\r\n                $('#label-file').text('Choisissez une vidéo');\r\n\r\n            }\r\n            else {\r\n\r\n                $('#loader-icon').hide();\r\n                $('#msg').removeClass('text-success').addClass('text-danger');\r\n                $('#msg').html(response.message);\r\n                $('#msg').css('display', 'block');\r\n                $('#btnSubmitAddVideo').prop('disabled', false);\r\n\r\n            }\r\n\r\n        },\r\n        error : function (erreur) {\r\n            $('#loader-icon').hide();\r\n            $('#msg').removeClass('text-success').addClass('text-danger');\r\n            $('#msg').html(response.message);\r\n            $('#msg').css('display', 'block');\r\n            $('#btnSubmitAddVideo').prop('disabled', false);\r\n        }\r\n\r\n    });\r\n\r\n});\r\n\r\n"]}